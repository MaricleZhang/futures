# å¸‚åœºæ‰«æå™¨ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½ç®€ä»‹

å¸‚åœºæ‰«æå™¨å¯ä»¥è‡ªåŠ¨æ‰«æå¸å®‰æœŸè´§å¸‚åœºä¸Šçš„æ‰€æœ‰USDTæ°¸ç»­åˆçº¦ï¼Œä½¿ç”¨æŒ‡å®šçš„äº¤æ˜“ç­–ç•¥åˆ†ææ¯ä¸ªåˆçº¦çš„åšå¤š/åšç©ºä¿¡å·ï¼Œå¹¶æ ¹æ®ä¿¡å·ç¡®å®šæ€§ï¼ˆç½®ä¿¡åº¦ï¼‰æ’åºï¼Œè¾“å‡ºç¡®å®šæ€§æœ€é«˜çš„å‰Nä¸ªäº¤æ˜“å¯¹ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. ç«‹å³æ‰§è¡Œä¸€æ¬¡æ‰«æ

```bash
python run_market_scanner.py --once
```

### 3. æ¯6å°æ—¶å®šæ—¶æ‰«æ

```bash
python run_market_scanner.py
```

## å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--once` | ç«‹å³æ‰§è¡Œä¸€æ¬¡æ‰«æåé€€å‡º | Falseï¼ˆå®šæ—¶æ¨¡å¼ï¼‰ |
| `--interval HOURS` | æ‰«æé—´éš”ï¼ˆå°æ—¶ï¼‰ | 6 |
| `--strategy TYPE` | ç­–ç•¥ç±»å‹ | config.pyä¸­çš„é…ç½® |
| `--top-n N` | æ˜¾ç¤ºå‰Nä¸ªç»“æœ | 5 |
| `--debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | False |

### æ”¯æŒçš„ç­–ç•¥ç±»å‹

- `qwen` - Qwen AIç­–ç•¥
- `deepseek` - DeepSeek AIç­–ç•¥
- `kimi` - Kimi AIç­–ç•¥
- `simple_adx_di` - ADX/DIæŠ€æœ¯æŒ‡æ ‡ç­–ç•¥
- `xgboost` - XGBoostæœºå™¨å­¦ä¹ ç­–ç•¥

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ä½¿ç”¨é»˜è®¤ç­–ç•¥æ‰«æå¹¶æ˜¾ç¤ºå‰5ä¸ªç»“æœ

```bash
python run_market_scanner.py --once
```

### ç¤ºä¾‹2: ä½¿ç”¨DeepSeekç­–ç•¥æ‰«æå¹¶æ˜¾ç¤ºå‰10ä¸ªç»“æœ

```bash
python run_market_scanner.py --once --strategy deepseek --top-n 10
```

### ç¤ºä¾‹3: æ¯2å°æ—¶å®šæ—¶æ‰«æ

```bash
python run_market_scanner.py --interval 2
```

### ç¤ºä¾‹4: åå°è¿è¡Œå®šæ—¶æ‰«æ

```bash
nohup python run_market_scanner.py > logs/market_scanner.log 2>&1 &
```

### ç¤ºä¾‹5: ä½¿ç”¨crontabæ¯å¤©9ç‚¹æ‰§è¡Œ

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œ
0 9 * * * cd /Users/zhangjian/WorkSpace/futures && python run_market_scanner.py --once
```

## è¾“å‡ºè¯´æ˜

### æ§åˆ¶å°è¾“å‡º

æ‰«æå®Œæˆåä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºæ ¼å¼åŒ–çš„è¡¨æ ¼ï¼Œåˆ†åˆ«åˆ—å‡ºåšå¤šå’Œåšç©ºçš„å‰Nä¸ªæœºä¼šï¼š

```
================================================================================
Market Scan Results - 2025-11-30 13:45:00
Strategy: qwen
Total Scanned: 50 symbols
================================================================================

ğŸ“ˆ TOP LONG OPPORTUNITIES (åšå¤šæœºä¼š)
--------------------------------------------------------------------------------
Rank  Symbol         Price          Confidence  Prediction         Reasoning
--------------------------------------------------------------------------------
1     BTC/USDT       45231.5        85.0%       ä¸Šæ¶¨               å¤šé‡æŠ€æœ¯æŒ‡æ ‡ç¡®è®¤...
2     ETH/USDT       2341.23        78.5%       éœ‡è¡åæ¶¨            RSIè¶…å–åå¼¹...
...

ğŸ“‰ TOP SHORT OPPORTUNITIES (åšç©ºæœºä¼š)
--------------------------------------------------------------------------------
Rank  Symbol         Price          Confidence  Prediction         Reasoning
--------------------------------------------------------------------------------
1     XRP/USDT       0.6234         82.3%       ä¸‹è·Œ               ç ´ä½ä¸‹è¡Œ...
...
```

### æ–‡ä»¶è¾“å‡º

æ‰«æç»“æœä¼šä¿å­˜åˆ° `data/market_scan_results/` ç›®å½•ï¼Œæ–‡ä»¶åæ ¼å¼ï¼š`scan_result_YYYYMMDD_HHMMSS.json`

JSONæ–‡ä»¶åŒ…å«å®Œæ•´çš„åˆ†æç»“æœï¼š

```json
{
  "long": [
    {
      "symbol": "BTC/USDT",
      "signal": 1,
      "confidence": 0.85,
      "current_price": 45231.5,
      "strategy": "qwen",
      "timestamp": "2025-11-30T13:45:00",
      "prediction": "ä¸Šæ¶¨",
      "reasoning": "å¤šé‡æŠ€æœ¯æŒ‡æ ‡ç¡®è®¤ä¸Šæ¶¨è¶‹åŠ¿...",
      "support": 44500.0,
      "resistance": 46000.0
    }
  ],
  "short": [...],
  "scan_time": "2025-11-30T13:45:00",
  "strategy": "qwen",
  "total_scanned": 50
}
```

## é…ç½®è¯´æ˜

åœ¨ `config.py` ä¸­å¯ä»¥ä¿®æ”¹æ‰«æé…ç½®ï¼š

```python
MARKET_SCAN_CONFIG = {
    'scan_interval_hours': 6,              # æ‰«æé—´éš”ï¼ˆå°æ—¶ï¼‰
    'strategy_type': 'qwen',               # é»˜è®¤ç­–ç•¥ç±»å‹
    'min_volume_24h': 1000000,             # æœ€å°24å°æ—¶äº¤æ˜“é‡è¿‡æ»¤
    'max_symbols_to_scan': 100,            # æœ€å¤§æ‰«ææ•°é‡ï¼ˆ0=ä¸é™åˆ¶ï¼‰
    'top_n_results': 5,                    # è¾“å‡ºå‰Nä¸ªç»“æœ
    'results_dir': 'data/market_scan_results',  # ç»“æœä¿å­˜ç›®å½•
}
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é™åˆ¶æ‰«ææ•°é‡**: è®¾ç½® `max_symbols_to_scan` é¿å…æ‰«æè¿‡å¤šåˆçº¦
2. **é€‰æ‹©åˆé€‚çš„ç­–ç•¥**: AIç­–ç•¥ï¼ˆqwen/deepseek/kimiï¼‰è°ƒç”¨APIè¾ƒæ…¢ï¼ŒæŠ€æœ¯æŒ‡æ ‡ç­–ç•¥æ›´å¿«
3. **è°ƒæ•´æ‰«æé—´éš”**: æ ¹æ®APIé…é¢å’Œå¸‚åœºå˜åŒ–é€Ÿåº¦è°ƒæ•´é—´éš”æ—¶é—´
4. **è¿‡æ»¤ä½æµåŠ¨æ€§**: ä½¿ç”¨ `min_volume_24h` è¿‡æ»¤äº¤æ˜“é‡å¤ªå°çš„åˆçº¦

## æ³¨æ„äº‹é¡¹

1. **APIé™é€Ÿ**: ä½¿ç”¨AIç­–ç•¥æ—¶æ³¨æ„APIè°ƒç”¨é¢‘ç‡é™åˆ¶
2. **ç½‘ç»œè¿æ¥**: ç¡®ä¿ç½‘ç»œç¨³å®šï¼Œæ‰«æéœ€è¦æŒç»­è®¿é—®äº¤æ˜“æ‰€API
3. **ç¯å¢ƒå˜é‡**: AIç­–ç•¥éœ€è¦åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ç›¸åº”çš„APIå¯†é’¥
4. **é£é™©æç¤º**: æ‰«æç»“æœä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®

## æ•…éšœæ’é™¤

### é—®é¢˜1: å¯¼å…¥é”™è¯¯

```
ImportError: No module named 'schedule'
```

**è§£å†³**: å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### é—®é¢˜2: APIè¿æ¥å¤±è´¥

```
Error fetching markets: Connection timeout
```

**è§£å†³**: 
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥ä»£ç†è®¾ç½®ï¼ˆconfig.pyä¸­çš„USE_PROXYï¼‰
- æ£€æŸ¥å¸å®‰APIæ˜¯å¦å¯è®¿é—®

### é—®é¢˜3: ç­–ç•¥åˆ†æå¤±è´¥

```
Error analyzing XXX/USDT: API key not found
```

**è§£å†³**: 
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­æ˜¯å¦é…ç½®äº†å¯¹åº”ç­–ç•¥çš„APIå¯†é’¥
- æˆ–ä½¿ç”¨æŠ€æœ¯æŒ‡æ ‡ç­–ç•¥ï¼ˆsimple_adx_diï¼‰

## æ‰©å±•å¼€å‘

### æ·»åŠ è‡ªå®šä¹‰ç­–ç•¥

1. åœ¨ `strategies/` ç›®å½•åˆ›å»ºæ–°ç­–ç•¥æ–‡ä»¶
2. ç»§æ‰¿ `BaseStrategy` ç±»
3. å®ç° `generate_signal()` æ–¹æ³•
4. åœ¨ `market_scanner.py` ä¸­æ·»åŠ åˆ° `STRATEGY_MAP`

### æ·»åŠ é€šçŸ¥åŠŸèƒ½

å¯ä»¥åœ¨ `MarketScanner.run()` æ–¹æ³•ä¸­æ·»åŠ é€šçŸ¥é€»è¾‘ï¼Œå‘é€é«˜ç½®ä¿¡åº¦ä¿¡å·çš„æé†’ã€‚

## ç›¸å…³æ–‡æ¡£

- [å®ç°æ–¹æ¡ˆ](/.gemini/antigravity/brain/d055bcfe-239f-4312-87fa-7b3323baeada/implementation_plan.md)
- [ç­–ç•¥å¼€å‘æŒ‡å—](docs/strategies.md)
- [APIæ–‡æ¡£](docs/api.md)
